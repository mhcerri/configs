#!/bin/bash
set -e
branch=$(git rev-parse --abbrev-ref HEAD)
case "$branch" in
*@*)
	# Handling special kernel branch...
	remote="${branch#*@}"
	remote_branch="${branch%%@*}"
	;;
*)
	remote="origin"
	remote_branch="$branch"
	;;
esac
prompt="Push local branch \"$branch\" to \"$remote/$remote_branch\"? [y/N] "
while true; do
	read -p "$prompt" answer
	case "$answer" in
	[yY]) break;;
	*) echo "Aborting..."; exit 1;;
	esac
done
echo git push "$@" "$remote" "$branch":"$remote_branch"
     git push "$@" "$remote" "$branch":"$remote_branch"
